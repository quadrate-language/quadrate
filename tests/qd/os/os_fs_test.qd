// Comprehensive file system operations test
use os

fn main( -- ) {
	// Cleanup: Remove test directory if it exists from previous run
	"/tmp/quadrate_fs_test" os::exists
	if {
		"/tmp/quadrate_fs_test" os::delete!
	}

	// Test 1: Check if /tmp exists (should return 1)
	"/tmp" os::exists . nl

	// Test 2: Check if non-existent file exists (should return 0)
	"/tmp/definitely_does_not_exist_12345.txt" os::exists . nl

	// Test 3: Create a test directory (errno=0 on success)
	"/tmp/quadrate_fs_test" os::mkdir if {
		// Success - errno is 0, nothing to print
	}

	// Test 4: Check if created directory exists (should return 1)
	"/tmp/quadrate_fs_test" os::exists . nl

	// Test 5: Try to create the same directory again (should fail with EEXIST)
	"/tmp/quadrate_fs_test" os::mkdir if {
		// Success branch shouldn't happen
	}

	// Test 6: Check the directory still exists
	"/tmp/quadrate_fs_test" os::exists . nl

	// Cleanup: Try to delete the directory (will fail since unlink doesn't work on dirs)
	"/tmp/quadrate_fs_test" os::delete if {
		// Success branch shouldn't happen
	}
}
