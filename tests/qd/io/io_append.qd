// Test file append mode
use io

fn main( -- ) {
	// Write initial content
	"/tmp/test_append.txt" "w" io::open if {
		dup "Line 1\n" io::write if {
			drop
			io::close
		} else {
			drop io::close
		}
	} else {
		drop
	}

	// Append more content
	"/tmp/test_append.txt" "a" io::open if {
		dup "Line 2\n" io::write if {
			drop
			io::close
		} else {
			drop io::close
		}
	} else {
		drop
	}

	// Read all content
	"/tmp/test_append.txt" "r" io::open if {
		dup 100 io::read if {
			drop swap
			io::close
			prints
		} else {
			drop drop io::close
		}
	} else {
		drop
	}
}
