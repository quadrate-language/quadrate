// Test file seek operations
use io

fn main( -- ) {
	// Create a test file with known content
	"/tmp/test_seek.txt" io::Write io::open if {
		dup "0123456789" io::write if {
			drop
			io::close
		} else {
			drop io::close
		}
	} else {
		drop
	}

	// Open for reading, seek and read
	"/tmp/test_seek.txt" io::Read io::open if {
		dup 5 io::SeekSet io::seekg if {
			drop                    // Drop position
			dup 3 io::read if {
				drop                // Drop bytes_read
				swap                // handle data -> data handle
				io::close
				prints
			} else {
				drop drop io::close
			}
		} else {
			drop io::close
		}
	} else {
		drop
	}
}
