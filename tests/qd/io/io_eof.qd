// Test basic file read
use io

fn main( -- ) {
	// Create a small file
	"/tmp/test_eof.txt" io::Write io::open if {
		dup "ABC" io::write if {
			drop
			io::close
		} else {
			drop io::close
		}
	} else {
		drop
	}

	// Open and read
	"/tmp/test_eof.txt" io::Read io::open if {
		dup 3 io::read if {
			drop swap
			io::close
			prints
		} else {
			drop drop io::close
		}
	} else {
		drop
	}
}
